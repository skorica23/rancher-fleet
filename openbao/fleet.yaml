defaultnamespace: openbao

helm:
  # Name of the Helm release
  releaseName: openbao-ha

  # OpenBao official Helm chart
  chart: openbao
  repo: https://openbao.github.io/openbao-helm
  # Optional: pin a version, or leave empty to track latest
  # version: "0.19.3"

  force: false
  timeoutSeconds: 600

  values:
    # OpenBao server configuration
    server:
      ha:
        enabled: true
        # 3 OpenBao pods (HA cluster)
        replicas: 3

        # Enable Integrated Storage (Raft) backend
        raft:
          enabled: true
          # Recommended so each pod gets a stable node_id
          setNodeId: true
          # Minimal Raft + listener config (no TLS; good for lab/dev)
          # Adjust for production (enable TLS, auto-unseal, etc.)
          config: |-
            ui = false

            listener "tcp" {
              tls_disable     = 1
              address         = "[::]:8200"
              cluster_address = "[::]:8201"
            }

            storage "raft" {
              path = "/openbao/data"
            }

            service_registration "kubernetes" {}

      # Persistent storage for Raft data
      dataStorage:
        enabled: true
        size: 10Gi
        # Adjust to your cluster storage class
        storageClass: "longhorn"

    # Optional: enable UI and expose via a ClusterIP service
    ui:
      enabled: true
      serviceType: ClusterIP
